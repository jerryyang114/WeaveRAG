<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Financial Assistant - Chat History</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>tailwind.config={theme:{extend:{colors:{primary:'#1677FF',secondary:'#4096ff'},borderRadius:{'none':'0px','sm':'2px',DEFAULT:'4px','md':'8px','lg':'12px','xl':'16px','2xl':'20px','3xl':'24px','full':'9999px','button':'4px'}}}}</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
.sidebar-item {
display: flex;
align-items: center;
padding: 12px 24px;
color: #ffffff;
opacity: 0.8;
transition: all 0.3s;
}
.sidebar-item:hover {
opacity: 1;
background: rgba(255,255,255,0.1);
}
.sidebar-item.active {
opacity: 1;
background: rgba(255,255,255,0.2);
font-weight: 500;
border-right: 3px solid #fff;
}
.sidebar-item i {
width: 20px;
height: 20px;
display: flex;
justify-content: center;
align-items: center;
margin-right: 8px;
}
.search-input {
width: 100%;
border: 1px solid #d9d9d9;
transition: all 0.3s;
}
.search-input:focus {
border-color: #1677FF;
box-shadow: 0 0 0 2px rgba(22,119,255,0.2);
}
.card {
transition: all 0.3s;
}
.card:hover {
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.modal {
display: none;
background: rgba(0,0,0,0.45);
}
.modal.show {
display: flex;
}
.prose {
max-width: 65ch;
color: #374151;
}
.prose h1 {
font-size: 1.5em;
margin-top: 0;
margin-bottom: 0.8em;
font-weight: 600;
}
.prose h2 {
font-size: 1.25em;
margin-top: 1.6em;
margin-bottom: 0.6em;
font-weight: 600;
}
.prose ul {
margin-top: 0.5em;
margin-bottom: 0.5em;
}
.prose li {
margin-top: 0.25em;
margin-bottom: 0.25em;
}
</style>
</head>
<body class="bg-gray-100 min-h-screen h-screen overflow-hidden">
<div class="flex h-full overflow-hidden">
<!-- 左侧导航 -->
<div class="w-[200px] bg-[#001529] flex-shrink-0 flex flex-col justify-between transition-all duration-300 overflow-y-auto" id="sidebar">
<div>
<div class="h-[64px] flex items-center px-6 justify-between">
<span class="text-white text-xl font-['Pacifico']">Weave RAG</span>
<button onclick="toggleSidebar()" class="text-white hover:text-gray-300">
<i class="fas fa-bars"></i>
</button>
</div>
<div class="flex flex-col flex-1">
<a href="#" class="sidebar-item active">
<i class="fas fa-database"></i>
<span>知识库</span>
</a>
<a href="#" class="sidebar-item">
<i class="fas fa-comments"></i>
<span>聊天</span>
</a>
<a href="#" class="sidebar-item">
<i class="fas fa-code"></i>
<span>Prompt管理</span>
</a>
</div>
</div>
<!-- 用户信息 -->
<div class="border-t border-gray-700 p-4">
<div class="flex items-center">
<img src="https://ai-public.mastergo.com/ai/img_res/89c063b565eeb8d110854790ecc55f9e.jpg" class="w-10 h-10 rounded-full object-cover mr-3">
<div class="flex-1">
<div class="text-white text-sm">Sarah Johnson</div>
<div class="text-gray-400 text-xs">Financial Advisor</div>
</div>
<button class="text-gray-400 hover:text-white">
<i class="fas fa-sign-out-alt"></i>
</button>
</div>
</div>
</div>
<!-- 上传文件弹窗 -->
<div id="uploadModal" class="modal fixed inset-0 z-50 items-center justify-center">
<div class="bg-white rounded-lg w-[600px]">
<div class="flex items-center justify-between p-4 border-b">
<h3 class="text-lg font-medium">上传文件</h3>
<button onclick="hideUploadModal()" class="text-gray-400 hover:text-gray-500">
<i class="fas fa-times"></i>
</button>
</div>
<div class="p-6">
<div class="mb-6">
<div class="w-full h-[200px] border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-primary transition-colors" onclick="document.getElementById('fileInput').click()">
<input type="file" id="fileInput" class="hidden" accept=".pdf,.doc,.docx,.wps,.ofd,.txt,.md,.markdown" multiple>
<i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
<p class="text-gray-600 mb-1">点击或拖拽文件到这里上传</p>
<p class="text-gray-400 text-sm">支持 PDF、DOC、WPS、OFD、TXT、Markdown 格式</p>
</div>
</div>
<div id="fileList" class="space-y-2 max-h-[200px] overflow-auto"></div>
<div class="flex justify-end gap-2">
<button onclick="hideUploadModal()" class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">取消</button>
<button class="px-4 h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">确定上传</button>
</div>
</div>
</div>
</div>
<!-- 右侧内容区 -->
<div class="flex-1 p-6 overflow-hidden flex flex-col">
<!-- 面包屑 -->
<div class="mb-4 flex items-center text-sm">
<a href="#" class="text-gray-600 hover:text-primary">首页</a>
<i class="fas fa-chevron-right mx-2 text-gray-400 text-xs"></i>
<a href="#" class="text-gray-600 hover:text-primary">知识库</a>
<i class="fas fa-chevron-right mx-2 text-gray-400 text-xs"></i>
<span class="text-gray-400">通用知识库</span>
</div>
<!-- Tab内容 -->
<div class="bg-white rounded-lg border border-gray-200 flex-1 overflow-auto">
<div class="p-4">
<!-- 顶部操作栏 -->
<div class="flex items-center mb-4">
<div class="flex items-center gap-3">
<button class="flex items-center text-gray-600 hover:text-primary">
<i class="fas fa-arrow-left mr-2"></i>返回
</button>
<span class="text-gray-900">产品介绍文档.pdf</span>
</div>
</div>
<div class="flex items-center justify-between mb-4">
<h3 class="text-lg font-medium">文档切片</h3>
<div class="flex items-center gap-3">
<div class="flex items-center text-sm bg-gray-100 rounded-button h-[32px] px-3">
<label class="flex items-center gap-2 cursor-pointer">
<input type="radio" name="textMode" class="w-4 h-4 text-primary border-gray-300 rounded-sm focus:ring-primary" checked>
<span class="text-gray-600">全文</span>
</label>
<div class="w-[1px] h-4 bg-gray-300 mx-3"></div>
<label class="flex items-center gap-2 cursor-pointer">
<input type="radio" name="textMode" class="w-4 h-4 text-primary border-gray-300 rounded-sm focus:ring-primary">
<span class="text-gray-600">省略</span>
</label>
</div>
<div class="relative">
<button onclick="toggleDropdown('batchActions')" class="text-gray-600 hover:text-primary px-3 py-1 rounded-button">
<i class="fas fa-ellipsis-v"></i>
</button>
<div id="batchActions" class="hidden absolute right-0 top-full mt-1 w-32 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10">
<label class="flex items-center px-4 py-2 text-sm text-gray-600 hover:bg-gray-50 cursor-pointer" onclick="selectAll()">
<input type="checkbox" class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary mr-2">
<span>选择所有</span>
</label>
<a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50">启用选定</a>
<a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50">禁用选定</a>
<a href="#" class="block px-4 py-2 text-sm text-red-500 hover:bg-gray-50">删除选定</a>
</div>
</div>
</div>
</div>
<!-- 搜索和过滤 -->
<div class="flex items-center gap-4 mb-4">
<div class="flex-1 relative">
<i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
<input type="text" class="w-full h-[32px] pl-9 pr-3 border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="搜索文档内容...">
</div>
<div class="relative">
<button onclick="toggleDropdown('modelDropdown')" class="px-4 h-[32px] bg-white border border-gray-300 text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">
<i class="fas fa-database mr-1"></i>text2vec-base (段落切片)
</button>
<div id="modelDropdown" class="hidden absolute right-0 top-full mt-1 w-72 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10">
<a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50">text2vec-base (段落切片)</a>
<a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50">text2vec-large (句子切片)</a>
</div>
</div>
<div class="relative">
<button onclick="toggleDropdown('filterDropdown')" class="px-4 h-[32px] bg-white border border-gray-300 text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">
<i class="fas fa-filter mr-1"></i>全部
</button>
<div id="filterDropdown" class="hidden absolute right-0 top-full mt-1 w-32 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10">
<a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50">全部</a>
<a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50">启用</a>
<a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-50">禁用</a>
</div>
</div>
</div>
<!-- 内容区域 -->
<div class="flex flex-col gap-6 h-full">
<!-- 上半部分：切片结果 -->
<div class="flex-1">
<div class="space-y-4">
<div class="group flex items-center gap-4 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors hover:border hover:border-primary" onclick="highlightText(1)">
<input type="checkbox" class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary flex-shrink-0">
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<div class="text-sm text-gray-500">第 1 段</div>
<div class="flex items-center gap-2">
<div class="hidden group-hover:flex items-center gap-2">
<button onclick="openEditModal(1)" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-primary">
<i class="fas fa-edit"></i>
</button>
<button onclick="deleteBlock(1)" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<button type="button" role="switch" aria-checked="true" class="bg-primary w-[45px] h-[24px] p-0.5 rounded-full relative transition-colors hover:bg-secondary">
<span class="bg-white block w-[18px] h-[18px] rounded-full transform translate-x-[21px] transition-transform duration-200"></span>
</button>
</div>
</div>
<p class="text-gray-700">部署流程是一个至关重要的环节，需要仔细规划每一个步骤。首先，我们需要准备好所有必要的依赖项和配置文件。接着，需要确保数据库连接正确配置，并完成数据迁移工作。最后，进行全面的测试，确保系统正常运行。我们建议在正式部署前，先在测试环境中进行充分验证。</p>
</div>
</div>
<div class="group flex items-center gap-4 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors hover:border hover:border-primary" onclick="highlightText(2)">
<input type="checkbox" class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary flex-shrink-0">
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<div class="text-sm text-gray-500">第 2 段</div>
<div class="flex items-center gap-2">
<div class="hidden group-hover:flex items-center gap-2">
<button onclick="openEditModal(2)" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-primary">
<i class="fas fa-edit"></i>
</button>
<button onclick="deleteBlock(2)" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<button type="button" role="switch" aria-checked="true" class="bg-primary w-[45px] h-[24px] p-0.5 rounded-full relative transition-colors hover:bg-secondary">
<span class="bg-white block w-[18px] h-[18px] rounded-full transform translate-x-[21px] transition-transform duration-200"></span>
</button>
</div>
</div>
<p class="text-gray-700">微服务架构的部署需要特别注意服务之间的依赖关系。推荐使用容器化技术，如 Docker 和 Kubernetes，来管理服务的部署和扩展。每个服务都应该有独立的配置管理和日志收集机制。同时，要建立完善的监控体系，及时发现和解决潜在问题。</p>
</div>
</div>
</div>
</div>
<!-- 下半部分：Markdown和原文 -->
<div class="flex gap-6 flex-1">
<!-- 左侧Markdown -->
<div class="flex-1 group">
<div class="p-4 bg-gray-50 rounded-lg h-full relative">
<div class="flex items-center justify-between mb-3">
<h3 class="font-medium">Markdown</h3>
<div class="hidden group-hover:flex items-center gap-2">
<button onclick="editMarkdown()" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-primary">
<i class="fas fa-edit"></i>
</button>
</div>
</div>
<div class="prose prose-sm max-w-none" id="markdownContent">
<h1>部署流程文档</h1>
<h2>1. 部署准备</h2>
<ul>
<li>准备必要依赖项，包括 Node.js 环境和 npm 依赖包</li>
<li>准备配置文件，确保环境变量和配置项完整</li>
<li>配置数据库连接，包括主备数据库配置</li>
<li>完成数据迁移，备份旧数据并验证迁移结果</li>
</ul>
<h2>2. 微服务部署</h2>
<ul>
<li>分析服务依赖关系，制定部署顺序和回滚方案</li>
<li>使用容器化技术（Docker/K8s），配置镜像仓库和网络策略</li>
<li>配置管理和日志收集，部署 ELK 日志系统</li>
<li>建立监控体系，配置 Prometheus 和 Grafana</li>
</ul>
<h2>3. 安全配置</h2>
<ul>
<li>配置 SSL 证书和 HTTPS 访问</li>
<li>设置防火墙和访问控制策略</li>
<li>配置数据加密和密钥管理</li>
<li>部署 WAF 和入侵检测系统</li>
</ul>
<h2>4. 性能优化</h2>
<ul>
<li>配置负载均衡器和 CDN</li>
<li>优化数据库索引和查询性能</li>
<li>配置缓存系统和队列服务</li>
<li>进行压力测试和性能调优</li>
</ul>
<h2>5. 运维管理</h2>
<ul>
<li>配置自动化部署和持续集成</li>
<li>建立备份和恢复机制</li>
<li>制定故障处理和应急预案</li>
<li>部署运维监控和告警系统</li>
</ul>
</div>
</div>
</div>
<!-- 右侧原文 -->
<div class="w-[400px]">
<div class="h-full">
<div class="p-4 bg-gray-50 rounded-lg h-full">
<h3 class="font-medium mb-3">原文内容</h3>
<div class="text-gray-700 space-y-4">
<p id="original-text-1" class="transition-colors duration-200">部署流程是一个至关重要的环节，需要仔细规划每一个步骤。首先，我们需要准备好所有必要的依赖项和配置文件。接着，需要确保数据库连接正确配置，并完成数据迁移工作。最后，进行全面的测试，确保系统正常运行。我们建议在正式部署前，先在测试环境中进行充分验证。</p>
<p id="original-text-2" class="transition-colors duration-200">微服务架构的部署需要特别注意服务之间的依赖关系。推荐使用容器化技术，如 Docker 和 Kubernetes，来管理服务的部署和扩展。每个服务都应该有独立的配置管理和日志收集机制。同时，要建立完善的监控体系，及时发现和解决潜在问题。</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Empty State -->
<div class="py-8 text-center text-gray-500">
</div>
<!-- 批量操作按钮 -->
</div>
</div>
<!-- 删除确认弹窗 -->
<div id="deleteModal" class="modal fixed inset-0 z-50 items-center justify-center">
<div class="bg-white rounded-lg w-[400px]">
<div class="flex items-center justify-between p-4 border-b">
<h3 class="text-lg font-medium">删除知识库</h3>
<button onclick="hideDeleteModal()" class="text-gray-400 hover:text-gray-500">
<i class="fas fa-times"></i>
</button>
</div>
<div class="p-6">
<p class="text-gray-600 mb-6">确定要删除该知识库吗？删除后数据将无法恢复。</p>
<div class="flex justify-end gap-2">
<button onclick="hideDeleteModal()" class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">取消</button>
<button class="px-4 h-[32px] bg-red-500 text-white rounded-button hover:bg-red-600 whitespace-nowrap">确定删除</button>
</div>
</div>
</div>
</div>
<!-- 新建通用知识库弹窗 -->
<div id="createModal" class="modal fixed inset-0 z-50 items-center justify-center">
<div class="bg-white rounded-lg w-[600px]">
<div class="flex items-center justify-between p-4 border-b">
<h3 class="text-lg font-medium">新建通用知识库</h3>
<button onclick="hideModal()" class="text-gray-400 hover:text-gray-500">
<i class="fas fa-times"></i>
</button>
</div>
<div class="p-6">
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">知识库名称</label>
<input type="text" class="w-full h-[32px] px-3 border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入知识库名称">
</div>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">知识库描述</label>
<textarea class="w-full h-[80px] px-3 py-2 border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入知识库描述"></textarea>
</div>
<div id="vectorForms">
<div class="vector-form mb-4 p-4 bg-gray-50 rounded-lg">
<div class="flex items-center justify-between mb-2">
<span class="text-sm font-medium text-gray-700">向量组 #1</span>
<button onclick="removeVectorForm(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<div class="grid grid-cols-2 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">向量模型</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<option value="">请选择切片策略</option>
<option value="text2vec-base">段落切片 (text2vec-base)</option>
<option value="text2vec-large">句子切片 (text2vec-large)</option>
<option value="text2vec-multilingual">Markdown切片 (text2vec-multilingual)</option>
</select>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">切片策略</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<option value="">请选择切片策略</option>
<option value="paragraph">段落切片</option>
<option value="sentence">句子切片</option>
<option value="markdown">Markdown切片</option>
</select>
</div>
</div>
</div>
</div>
</div>
<button onclick="addVectorForm()" class="mb-6 px-4 h-[32px] bg-white border border-dashed border-gray-300 text-primary rounded-button hover:border-primary hover:text-primary whitespace-nowrap w-full">
<i class="fas fa-plus mr-1"></i>添加向量组
</button>
<div class="flex justify-end gap-2">
<button onclick="hideModal()" class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">取消</button>
<button class="px-4 h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">确定</button>
</div>
</div>
</div>
</div>
<style>
#sidebar.collapsed {
width: 64px;
}
#sidebar.collapsed .sidebar-item span,
#sidebar.collapsed .text-xl {
display: none;
}
#sidebar.collapsed .sidebar-item {
justify-content: center;
padding: 12px;
}
#sidebar.collapsed .sidebar-item i {
margin-right: 0;
}
#sidebar.collapsed .border-t {
display: none;
}
</style>
<script>
function addQuestion() {
const id = Math.random().toString(36).substr(2, 9);
const template = `
<div class="question-item" data-id="${id}">
<div class="flex items-center gap-2 mb-2">
<input type="text" class="flex-1 h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入问题..." onchange="updateQuestion('${id}', 'question', this.value)">
<button onclick="removeQuestion(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<textarea class="w-full h-[100px] px-4 py-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入回答内容..." onchange="updateQuestion('${id}', 'answer', this.value)"></textarea>
</div>
`;
document.getElementById('questionList').insertAdjacentHTML('beforeend', template);
saveQuestions();
}
function updateQuestion(id, field, value) {
const questions = getQuestions();
if (!questions[id]) questions[id] = {};
questions[id][field] = value;
localStorage.setItem('questions', JSON.stringify(questions));
}
function getQuestions() {
return JSON.parse(localStorage.getItem('questions') || '{}');
}
function removeQuestion(btn) {
if(document.querySelectorAll('.question-item').length > 1) {
const item = btn.closest('.question-item');
const id = item.dataset.id;
const questions = getQuestions();
delete questions[id];
localStorage.setItem('questions', JSON.stringify(questions));
item.remove();
}
}
function saveQuestions() {
const questions = {};
document.querySelectorAll('.question-item').forEach(item => {
const id = item.dataset.id;
const question = item.querySelector('input').value;
const answer = item.querySelector('textarea').value;
questions[id] = {question, answer};
});
localStorage.setItem('questions', JSON.stringify(questions));
}
function loadQuestions() {
const questions = getQuestions();
const questionList = document.getElementById('questionList');
questionList.innerHTML = '';
Object.entries(questions).forEach(([id, data]) => {
const template = `
<div class="question-item" data-id="${id}">
<div class="flex items-center gap-2 mb-2">
<input type="text" class="flex-1 h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入问题..." value="${data.question || ''}" onchange="updateQuestion('${id}', 'question', this.value)">
<button onclick="removeQuestion(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<textarea class="w-full h-[100px] px-4 py-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入回答内容..." onchange="updateQuestion('${id}', 'answer', this.value)">${data.answer || ''}</textarea>
</div>
`;
questionList.insertAdjacentHTML('beforeend', template);
});
}
function updateQuestion(id, field, value) {
const questions = JSON.parse(localStorage.getItem('questions') || '{}');
if (!questions[id]) questions[id] = {};
questions[id][field] = value;
localStorage.setItem('questions', JSON.stringify(questions));
}
function removeQuestion(btn) {
if(document.querySelectorAll('.question-item').length > 1) {
btn.closest('.question-item').remove();
}
}
function addKeyword() {
const id = Math.random().toString(36).substr(2, 9);
const template = `
<div class="keyword-item flex items-center gap-2" data-id="${id}">
<div class="flex-1">
<input type="text" class="w-full h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入关键词..." onchange="updateKeyword('${id}', 'keyword', this.value)">
</div>
<input type="number" min="0" max="1" step="0.1" value="0.3" class="w-24 h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="权重" onchange="updateKeyword('${id}', 'weight', this.value)">
<button onclick="removeKeyword(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
`;
document.getElementById('keywordList').insertAdjacentHTML('beforeend', template);
saveKeywords();
}
function updateKeyword(id, field, value) {
const keywords = getKeywords();
if (!keywords[id]) keywords[id] = {};
keywords[id][field] = value;
localStorage.setItem('keywords', JSON.stringify(keywords));
}
function getKeywords() {
return JSON.parse(localStorage.getItem('keywords') || '{}');
}
function removeKeyword(btn) {
if(document.querySelectorAll('.keyword-item').length > 1) {
const item = btn.closest('.keyword-item');
const id = item.dataset.id;
const keywords = getKeywords();
delete keywords[id];
localStorage.setItem('keywords', JSON.stringify(keywords));
item.remove();
}
}
function saveKeywords() {
const keywords = {};
document.querySelectorAll('.keyword-item').forEach(item => {
const id = item.dataset.id;
const keyword = item.querySelector('input[type="text"]').value;
const weight = item.querySelector('input[type="number"]').value;
keywords[id] = {keyword, weight};
});
localStorage.setItem('keywords', JSON.stringify(keywords));
}
function loadKeywords() {
const keywords = getKeywords();
const keywordList = document.getElementById('keywordList');
keywordList.innerHTML = '';
Object.entries(keywords).forEach(([id, data]) => {
const template = `
<div class="keyword-item flex items-center gap-2" data-id="${id}">
<div class="flex-1">
<input type="text" class="w-full h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入关键词..." value="${data.keyword || ''}" onchange="updateKeyword('${id}', 'keyword', this.value)">
</div>
<input type="number" min="0" max="1" step="0.1" value="${data.weight || 0.3}" class="w-24 h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="权重" onchange="updateKeyword('${id}', 'weight', this.value)">
<button onclick="removeKeyword(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
`;
keywordList.insertAdjacentHTML('beforeend', template);
});
}
function removeKeyword(btn) {
if(document.querySelectorAll('.keyword-item').length > 1) {
btn.closest('.keyword-item').remove();
}
}
function toggleSidebar() {
const sidebar = document.getElementById('sidebar');
sidebar.classList.toggle('collapsed');
}
// 添加开关切换功能
document.addEventListener('DOMContentLoaded', function() {
const switches = document.querySelectorAll('button[role="switch"]');
switches.forEach(switchBtn => {
switchBtn.addEventListener('click', function() {
const isChecked = this.getAttribute('aria-checked') === 'true';
this.setAttribute('aria-checked', !isChecked);
if(!isChecked) {
this.classList.add('bg-gray-300', 'hover:bg-gray-400');
this.classList.remove('bg-gray-200');
this.querySelector('span').classList.add('translate-x-[21px]');
this.querySelector('span').classList.remove('translate-x-0');
} else {
this.classList.remove('bg-gray-300', 'hover:bg-gray-400');
this.classList.add('bg-gray-200');
this.querySelector('span').classList.remove('translate-x-[21px]');
this.querySelector('span').classList.add('translate-x-0');
}
});
});
});
function toggleDropdown(id) {
const dropdown = document.getElementById(id);
const dropdowns = document.querySelectorAll('[id^="actionDropdown"], [id^="newKnowledge"]');
dropdowns.forEach(d => {
if(d.id !== id) d.classList.add('hidden');
});
dropdown.classList.toggle('hidden');
}
function selectAll() {
const checkbox = event.target.closest('label').querySelector('input[type="checkbox"]');
const isChecked = checkbox.checked;
const checkboxes = document.querySelectorAll('input[type="checkbox"]');
checkboxes.forEach(cb => {
cb.checked = isChecked;
});
document.getElementById('batchActions').classList.add('hidden');
}
document.addEventListener('click', function(e) {
const dropdowns = document.querySelectorAll('[id^="actionDropdown"], [id^="newKnowledge"]');
dropdowns.forEach(dropdown => {
if (!dropdown.contains(e.target) && !e.target.closest('button[onclick^="toggleDropdown"]')) {
dropdown.classList.add('hidden');
}
});
});
function showModal() {
document.getElementById('createModal').classList.add('show');
}
function hideModal() {
document.getElementById('createModal').classList.remove('show');
}
let formCount = 1;
function addVectorForm() {
formCount++;
const template = `
<div class="vector-form mb-4 p-4 bg-gray-50 rounded-lg">
<div class="flex items-center justify-between mb-2">
<span class="text-sm font-medium text-gray-700">向量组 #${formCount}</span>
<button onclick="removeVectorForm(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<div class="grid grid-cols-2 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">向量模型</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<option value="">请选择切片策略</option>
<option value="text2vec-base">段落切片 (text2vec-base)</option>
<option value="text2vec-large">句子切片 (text2vec-large)</option>
<option value="text2vec-multilingual">Markdown切片 (text2vec-multilingual)</option>
</select>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">切片策略</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<option value="">请选择切片策略</option>
<option value="paragraph">段落切片</option>
<option value="sentence">句子切片</option>
<option value="markdown">Markdown切片</option>
</select>
</div>
</div>
</div>
</div>
`;
document.getElementById('vectorForms').insertAdjacentHTML('beforeend', template);
}
function removeVectorForm(btn) {
if(document.querySelectorAll('.vector-form').length > 1) {
btn.closest('.vector-form').remove();
}
}
</script>
<!-- 新建文件夹弹窗 -->
<div id="createFolderModal" class="modal fixed inset-0 z-50 items-center justify-center">
<div class="bg-white rounded-lg w-[600px]">
<div class="flex items-center justify-between p-4 border-b">
<h3 class="text-lg font-medium">新建文件夹</h3>
<button onclick="hideFolderModal()" class="text-gray-400 hover:text-gray-500">
<i class="fas fa-times"></i>
</button>
</div>
<div class="p-6">
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">文件夹名称</label>
<input type="text" class="w-full h-[32px] px-3 border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入文件夹名称">
</div>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">文件夹描述</label>
<textarea class="w-full h-[80px] px-3 py-2 border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入文件夹描述"></textarea>
</div>
<div class="flex justify-end gap-2">
<button onclick="hideFolderModal()" class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">取消</button>
<button class="px-4 h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">确定</button>
</div>
</div>
</div>
</div>
<!-- 知识库设置弹窗 -->
<div id="settingsModal" class="modal fixed inset-0 z-50 items-center justify-center">
<div class="bg-white rounded-lg w-[600px]">
<div class="flex items-center justify-between p-4 border-b">
<h3 class="text-lg font-medium">知识库配置</h3>
<button onclick="hideSettingsModal()" class="text-gray-400 hover:text-gray-500">
<i class="fas fa-times"></i>
</button>
</div>
<div class="p-6">
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">知识库名称</label>
<input type="text" value="通用知识库" class="w-full h-[32px] px-3 border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入知识库名称">
</div>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">知识库图标</label>
<div class="flex items-center gap-4">
<div class="w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center">
<i class="fas fa-database text-primary text-xl"></i>
</div>
<label class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap cursor-pointer">
<input type="file" class="hidden" accept="image/*">
<i class="fas fa-upload mr-1"></i>上传图标
</label>
</div>
</div>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">知识库描述</label>
<textarea class="w-full h-[80px] px-3 py-2 border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入知识库描述">用于存储和管理通用类型的知识文档</textarea>
</div>
<div id="vectorSettingForms">
<div class="vector-setting-form mb-4 p-4 bg-gray-50 rounded-lg">
<div class="flex items-center justify-between mb-2">
<span class="text-sm font-medium text-gray-700">向量组 #1</span>
<button onclick="removeVectorSettingForm(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<div class="space-y-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">向量模型</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<option value="">请选择切片策略</option>
<option value="text2vec-base">段落切片 (text2vec-base)</option>
<option value="text2vec-large">句子切片 (text2vec-large)</option>
<option value="text2vec-multilingual">Markdown切片 (text2vec-multilingual)</option>
</select>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">切片策略</label>
<div class="space-y-2">
<label class="flex items-center gap-2 cursor-pointer">
<input type="checkbox" class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary" checked>
<span class="text-sm">段落切片</span>
</label>
<label class="flex items-center gap-2 cursor-pointer">
<input type="checkbox" class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary">
<span class="text-sm">句子切片</span>
</label>
<label class="flex items-center gap-2 cursor-pointer">
<input type="checkbox" class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary">
<span class="text-sm">Markdown 切片</span>
</label>
</div>
</div>
</div>
</div>
</div>
<button onclick="addVectorSettingForm()" class="mb-6 px-4 h-[32px] bg-white border border-dashed border-gray-300 text-primary rounded-button hover:border-primary hover:text-primary whitespace-nowrap w-full">
<i class="fas fa-plus mr-1"></i>添加向量组
</button>
<div class="flex justify-end gap-2">
<button onclick="hideSettingsModal()" class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">取消</button>
<button class="px-4 h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">保存</button>
</div>
</div>
</div>
</div>
<!-- 新建问答知识库弹窗 -->
<div id="createQAModal" class="modal fixed inset-0 z-50 items-center justify-center">
<div class="bg-white rounded-lg w-[600px]">
<div class="flex items-center justify-between p-4 border-b">
<h3 class="text-lg font-medium">新建问答知识库</h3>
<button onclick="hideQAModal()" class="text-gray-400 hover:text-gray-500">
<i class="fas fa-times"></i>
</button>
</div>
<div class="p-6">
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">知识库名称</label>
<input type="text" class="w-full h-[32px] px-3 border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入知识库名称">
</div>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">知识库描述</label>
<textarea class="w-full h-[80px] px-3 py-2 border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入知识库描述"></textarea>
</div>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">向量模型</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none appearance-none">
<option value="">请选择切片策略</option>
<option value="text2vec-base">段落切片 (text2vec-base)</option>
<option value="text2vec-large">句子切片 (text2vec-large)</option>
<option value="text2vec-multilingual">Markdown切片 (text2vec-multilingual)</option>
</select>
<i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
</div>
</div>
<div class="flex justify-end gap-2">
<button onclick="hideQAModal()" class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">取消</button>
<button class="px-4 h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">确定</button>
</div>
</div>
</div>
</div>
<script>
function highlightText(index) {
// 移除所有高亮
document.querySelectorAll('[id^="original-text-"]').forEach(el => {
el.classList.remove('bg-primary', 'bg-opacity-10', 'border', 'border-primary', 'text-primary');
});
document.querySelectorAll('#markdownContent h2, #markdownContent ul').forEach(el => {
el.classList.remove('bg-primary', 'bg-opacity-10', 'border', 'border-primary', 'text-primary');
});
// 添加高亮
document.getElementById(`original-text-${index}`).classList.add('bg-primary', 'bg-opacity-10', 'border', 'border-primary', 'text-primary');
// 根据索引判断要高亮的markdown段落
if(index === 1) {
const title = document.querySelector('#markdownContent h2:first-of-type');
const list = title.nextElementSibling;
title.classList.add('bg-primary', 'bg-opacity-10', 'border', 'border-primary', 'text-primary');
list.classList.add('bg-primary', 'bg-opacity-10', 'border', 'border-primary', 'text-primary');
} else if(index === 2) {
const title = document.querySelector('#markdownContent h2:nth-of-type(2)');
const list = title.nextElementSibling;
title.classList.add('bg-primary', 'bg-opacity-10', 'border', 'border-primary', 'text-primary');
list.classList.add('bg-primary', 'bg-opacity-10', 'border', 'border-primary', 'text-primary');
}
}
function showSettingsModal() {
document.getElementById('settingsModal').classList.add('show');
}
function hideSettingsModal() {
document.getElementById('settingsModal').classList.remove('show');
}
let settingFormCount = 1;
function addVectorSettingForm() {
settingFormCount++;
const template = `
<div class="vector-setting-form mb-4 p-4 bg-gray-50 rounded-lg">
<div class="flex items-center justify-between mb-2">
<span class="text-sm font-medium text-gray-700">向量组 #${settingFormCount}</span>
<button onclick="removeVectorSettingForm(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<div class="grid grid-cols-2 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">向量模型</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<option value="">请选择切片策略</option>
<option value="text2vec-base">段落切片 (text2vec-base)</option>
<option value="text2vec-large">句子切片 (text2vec-large)</option>
<option value="text2vec-multilingual">Markdown切片 (text2vec-multilingual)</option>
</select>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">切片策略</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<option value="">请选择切片策略</option>
<option value="paragraph">段落切片</option>
<option value="sentence">句子切片</option>
<option value="markdown">Markdown切片</option>
</select>
</div>
</div>
</div>
</div>
`;
document.getElementById('vectorSettingForms').insertAdjacentHTML('beforeend', template);
}
function removeVectorSettingForm(btn) {
if(document.querySelectorAll('.vector-setting-form').length > 1) {
btn.closest('.vector-setting-form').remove();
}
}
function showDeleteModal() {
document.getElementById('deleteModal').classList.add('show');
}
function hideDeleteModal() {
document.getElementById('deleteModal').classList.remove('show');
}
function showQAModal() {
document.getElementById('createQAModal').classList.add('show');
}
function hideQAModal() {
document.getElementById('createQAModal').classList.remove('show');
}
function showFolderModal() {
document.getElementById('createFolderModal').classList.add('show');
}
function hideFolderModal() {
document.getElementById('createFolderModal').classList.remove('show');
}
function showUploadModal() {
document.getElementById('uploadModal').classList.add('show');
document.getElementById('fileList').innerHTML = '';
document.getElementById('fileInput').value = '';
}
function hideUploadModal() {
document.getElementById('uploadModal').classList.remove('show');
}
document.getElementById('fileInput').addEventListener('change', function(e) {
const fileList = document.getElementById('fileList');
fileList.innerHTML = '';
Array.from(this.files).forEach(file => {
const fileItem = document.createElement('div');
fileItem.className = 'flex items-center justify-between p-2 bg-gray-50 rounded';
fileItem.innerHTML = `
<div class="flex items-center">
<i class="far fa-file text-gray-400 mr-2"></i>
<span class="text-sm text-gray-700">${file.name}</span>
</div>
<button onclick="this.parentElement.remove()" class="text-gray-400 hover:text-red-500">
<i class="fas fa-times"></i>
</button>
`;
fileList.appendChild(fileItem);
});
});
document.getElementById('uploadModal').addEventListener('dragover', function(e) {
e.preventDefault();
e.stopPropagation();
}, false);
document.getElementById('uploadModal').addEventListener('drop', function(e) {
e.preventDefault();
e.stopPropagation();
const dt = e.dataTransfer;
const files = dt.files;
document.getElementById('fileInput').files = files;
const event = new Event('change');
document.getElementById('fileInput').dispatchEvent(event);
}, false);
</script>
<!-- 检索测试Tab内容 -->
<div class="hidden bg-white rounded-lg border border-gray-200">
<div class="flex h-full overflow-hidden">
<!-- 左侧表单 -->
<div class="w-[600px] border-r border-gray-200 p-6 overflow-y-auto">
<div class="mb-6">
<label class="block text-sm font-medium text-gray-700 mb-2">问题列表</label>
<div id="questionList" class="space-y-3">
<div class="question-item">
<div class="flex items-center gap-2 mb-2">
<input type="text" class="flex-1 h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入问题...">
<button onclick="removeQuestion(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
<textarea class="w-full h-[100px] px-4 py-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入回答内容..."></textarea>
</div>
</div>
<button onclick="addQuestion()" class="mt-3 px-4 h-[32px] bg-white border border-dashed border-gray-300 text-primary rounded-button hover:border-primary hover:text-primary whitespace-nowrap w-full">
<i class="fas fa-plus mr-1"></i>添加问题
</button>
</div>
<div class="bg-gray-50 p-4 rounded-lg space-y-4 mb-6">
<div>
<label class="block text-sm text-gray-600 mb-1">相似度阈值</label>
<div class="relative">
<input type="number" min="0" max="1" step="0.1" value="0.7" class="w-full h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none">
<div class="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400">0.0 ~ 1.0</div>
</div>
</div>
<div>
<label class="block text-sm text-gray-600 mb-1">关键词列表</label>
<div id="keywordList" class="space-y-2 mb-3">
<div class="keyword-item flex items-center gap-2">
<div class="flex-1">
<input type="text" class="w-full h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="请输入关键词...">
</div>
<input type="number" min="0" max="1" step="0.1" value="0.3" class="w-24 h-[32px] px-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none" placeholder="权重">
<button onclick="removeKeyword(this)" class="text-gray-400 hover:text-red-500">
<i class="fas fa-trash-alt"></i>
</button>
</div>
</div>
<button onclick="addKeyword()" class="px-4 h-[32px] bg-white border border-dashed border-gray-300 text-primary rounded-button hover:border-primary hover:text-primary whitespace-nowrap w-full">
<i class="fas fa-plus mr-1"></i>添加关键词
</button>
</div>
<div>
<label class="block text-sm text-gray-600 mb-1">向量模型</label>
<div class="relative">
<select class="w-full h-[32px] px-3 bg-white border border-gray-300 rounded-button focus:border-primary focus:outline-none appearance-none">
<option value="text2vec-base">段落 (text2vec-base)</option>
<option value="text2vec-large">句子 (text2vec-large)</option>
<option value="text2vec-multilingual">Markdown (text2vec-multilingual)</option>
</select>
<i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
</div>
</div>
</div>
<button class="w-full h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">
<i class="fas fa-search mr-2"></i>开始检索
</button>
</div>
<!-- 右侧结果 -->
<div class="flex-1 p-6 overflow-y-auto">
<div class="border-b border-gray-200 pb-3 mb-4">
<h3 class="text-base font-medium">检索结果</h3>
</div>
<div class="space-y-4">
<div class="p-4 bg-gray-50 rounded-lg border border-gray-100">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-4">
<span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded">向量相似度：0.92</span>
<span class="px-2 py-1 bg-green-50 text-green-600 text-xs rounded">关键词相似度：0.85</span>
<span class="text-gray-400 text-sm">来自：产品介绍文档.pdf</span>
</div>
<button class="text-primary hover:text-secondary">
<i class="fas fa-arrow-up-right-from-square text-sm"></i>
</button>
</div>
<p class="text-gray-700">部署流程是一个至关重要的环节，需要仔细规划每一个步骤。首先，我们需要准备好所有必要的依赖项和配置文件。接着，需要确保数据库连接正确配置，并完成数据迁移工作。最后，进行全面的测试，确保系统正常运行。我们建议在正式部署前，先在测试环境中进行充分验证。</p>
</div>
<div class="p-4 bg-gray-50 rounded-lg border border-gray-100">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-4">
<span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded">向量相似度：0.85</span>
<span class="px-2 py-1 bg-green-50 text-green-600 text-xs rounded">关键词相似度：0.78</span>
<span class="text-gray-400 text-sm">来自：技术规划说明.docx</span>
</div>
<button class="text-primary hover:text-secondary">
<i class="fas fa-arrow-up-right-from-square text-sm"></i>
</button>
</div>
<p class="text-gray-700">微服务架构的部署需要特别注意服务之间的依赖关系。推荐使用容器化技术，如 Docker 和 Kubernetes，来管理服务的部署和扩展。每个服务都应该有独立的配置管理和日志收集机制。同时，要建立完善的监控体系，及时发现和解决潜在问题。</p>
</div>
<div class="p-4 bg-gray-50 rounded-lg border border-gray-100">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center gap-4">
<span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded">向量相似度：0.75</span>
<span class="px-2 py-1 bg-green-50 text-green-600 text-xs rounded">关键词相似度：0.82</span>
<span class="text-gray-400 text-sm">来自：部署配置文档.md</span>
</div>
<button class="text-primary hover:text-secondary">
<i class="fas fa-arrow-up-right-from-square text-sm"></i>
</button>
</div>
<p class="text-gray-700">在部署过程中，配置管理是重中之重。所有的配置参数都应该统一管理，可以使用配置中心来实现。同时要注意敏感信息的加密保护，建议使用专门的密钥管理服务。配置变更时要有完整的审计日志，确保可追溯性。</p>
</div>
</div>
</div>
</div>
</div>
<script>
// 添加tab切换功能
document.addEventListener('DOMContentLoaded', function() {
loadQuestions();
loadKeywords();
const tabButtons = document.querySelectorAll('.mb-4.flex.items-center.gap-2 button');
const tabContents = [
document.querySelector('.bg-white.rounded-lg.border.border-gray-200.flex-1'),
document.querySelector('.hidden.bg-white.rounded-lg.border.border-gray-200.p-6')
];
tabButtons.forEach((button, index) => {
button.addEventListener('click', () => {
// 更新按钮样式
tabButtons.forEach(btn => {
btn.className = 'px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap';
});
button.className = 'px-4 h-[32px] bg-primary text-white rounded-button whitespace-nowrap';
// 显示对应内容
tabContents.forEach((content, i) => {
if(i === index) {
content.classList.remove('hidden');
} else {
content.classList.add('hidden');
}
});
});
});
});
</script>
<!-- 编辑解析块弹窗 -->
<div id="editModal" class="modal fixed inset-0 z-50 items-center justify-center">
<div class="bg-white rounded-lg w-[600px]">
<div class="flex items-center justify-between p-4 border-b">
<h3 class="text-lg font-medium">编辑解析块</h3>
<button onclick="hideEditModal()" class="text-gray-400 hover:text-gray-500">
<i class="fas fa-times"></i>
</button>
</div>
<div class="p-6">
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">解析内容</label>
<textarea id="blockContent" class="w-full h-[200px] px-4 py-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none" placeholder="请输入解析内容..."></textarea>
</div>
<div class="flex justify-end gap-2">
<button onclick="hideEditModal()" class="px-4 h-[32px] bg-white border border-[#d9d9d9] text-gray-600 rounded-button hover:border-primary hover:text-primary whitespace-nowrap">取消</button>
<button onclick="saveBlock()" class="px-4 h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">保存</button>
</div>
</div>
</div>
</div>
<script>
let currentBlockId = null;
let isMarkdownEditing = false;
function openEditModal(id) {
event.stopPropagation(); // 阻止事件冒泡
currentBlockId = id;
const content = document.getElementById(`original-text-${id}`).textContent;
document.getElementById('blockContent').value = content;
document.getElementById('editModal').classList.add('show');
}
function hideEditModal() {
document.getElementById('editModal').classList.remove('show');
currentBlockId = null;
}
function saveBlock() {
if (!currentBlockId) return;
const content = document.getElementById('blockContent').value;
document.getElementById(`original-text-${currentBlockId}`).textContent = content;
hideEditModal();
// 显示确认弹窗
const modal = document.createElement('div');
modal.className = 'modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-45';
modal.innerHTML = `
<div class="bg-white rounded-lg w-[400px] p-6 text-center">
<i class="fas fa-check-circle text-4xl text-green-500 mb-4"></i>
<p class="text-gray-600 mb-6">文档已修改，将重新切片</p>
<button onclick="this.closest('.modal').remove()" class="px-4 h-[32px] bg-primary text-white rounded-button hover:bg-secondary whitespace-nowrap">确定</button>
</div>
`;
document.body.appendChild(modal);
}
function deleteBlock(id) {
event.stopPropagation(); // 阻止事件冒泡
if(confirm('确定要删除这个段落吗？')) {
const block = document.querySelector(`[onclick="highlightText(${id})"]`);
block.remove();
}
}
function editMarkdown() {
const markdownContent = document.getElementById('markdownContent');
const editButton = document.querySelector('[onclick="editMarkdown()"]');
if (!isMarkdownEditing) {
const textArea = document.createElement('textarea');
textArea.id = 'markdownEditor';
textArea.className = 'w-full h-[600px] px-4 py-3 text-sm border border-gray-300 rounded-button focus:border-primary focus:outline-none resize-none';
textArea.value = markdownContent.innerHTML.replace(/<[^>]*>/g, '');
markdownContent.replaceWith(textArea);
editButton.innerHTML = '<i class="fas fa-check mr-1"></i>';
isMarkdownEditing = true;
} else {
const textArea = document.getElementById('markdownEditor');
markdownContent.innerHTML = textArea.value;
textArea.replaceWith(markdownContent);
editButton.innerHTML = '<i class="fas fa-edit"></i>';
isMarkdownEditing = false;
}
}
</script>
</body>
</html>
